{"version":3,"sources":["services/people.js","components/Header.js","components/Notification.js","components/Filter.js","components/PersonForm.js","components/Person.js","components/People.js","App.js","index.js"],"names":["baseUrl","Header","_ref","title","react_default","a","createElement","Notification","message","className","concat","success","text","Filter","onChange","value","PersonForm","onSubmit","newPerson","name","placeholder","number","Person","onClick","Persons","people","handleDelete","numbers","map","p","components_Person","key","id","App","_useState","useState","_useState2","Object","slicedToArray","setPeople","emptyPerson","_useState3","_useState4","setNewPerson","_useState5","_useState6","filterValue","setFilterValue","_useState7","_useState8","filtered","setFiltered","_useState9","_useState10","setMessage","useEffect","axios","get","then","response","data","initialPersons","catch","e","fatalError","clearMessage","filterResult","filter","toLowerCase","includes","length","components_Notification","Fragment","components_Filter","target","components_PersonForm","preventDefault","some","window","confirm","find","updatedPerson","put","update","returnedPerson","setTimeout","errorText","error","post","create","toConsumableArray","_e$target","objectSpread","defineProperty","People","personToDelete","delete","remove","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.0562021a.chunk.js","sourcesContent":["import axios from 'axios';\n\nconst baseUrl = '/api/people';\n\nexport const getAll = () => {\n  const request = axios.get(baseUrl);\n  return request.then(response => response.data);\n};\n\nexport const create = newPerson => {\n  const request = axios.post(baseUrl, newPerson);\n  return request.then(response => response.data);\n};\n\nexport const update = (id, updatedPerson) => {\n  const request = axios.put(`${baseUrl}/${id}`, updatedPerson);\n  return request.then(response => response.data);\n};\n\nexport const remove = id => {\n  return axios.delete(`${baseUrl}/${id}`);\n};\n","import React from 'react';\n\nexport default ({ title }) => <h1>{title}</h1>;\n","import React from 'react';\n\nconst Notification = ({ message }) => (\n  <div className={`Notification ${message.success ? 'success' : 'error'}`}>\n    {message.text}\n  </div>\n);\n\nexport default Notification;\n","import React from 'react';\n\nconst Filter = ({ onChange, value }) => (\n  <div>\n    <h3>Filter by name</h3>\n    <input onChange={onChange} value={value} />\n  </div>\n);\n\nexport default Filter;\n","import React from 'react';\n\nconst PersonForm = ({ onSubmit, onChange, newPerson }) => (\n  <form onSubmit={onSubmit}>\n    <h3>Add new person</h3>\n    <div>\n      name:{' '}\n      <input\n        name=\"name\"\n        onChange={onChange}\n        value={newPerson.name}\n        placeholder=\"Add Name\"\n      />\n    </div>\n    <div>\n      number:{' '}\n      <input\n        name=\"number\"\n        onChange={onChange}\n        value={newPerson.number}\n        placeholder=\"Add Number\"\n      />\n    </div>\n    <div>\n      <button>add</button>\n    </div>\n  </form>\n);\n\nexport default PersonForm;\n","import React from 'react';\n\nconst Person = ({ name, number, onClick }) => (\n  <p>\n    {name} {number} <button onClick={onClick}>delete</button>\n  </p>\n);\n\nexport default Person;\n","import React from 'react';\nimport Person from './Person';\n\nconst Persons = ({ people, handleDelete }) => {\n  const numbers = people.map(p => (\n    <Person\n      key={p.id}\n      name={p.name}\n      number={p.number}\n      onClick={() => handleDelete(p.id)}\n    />\n  ));\n\n  return (\n    <div>\n      <h3>Numbers</h3>\n      {numbers}\n    </div>\n  );\n};\n\nexport default Persons;\n","import React, { useState, useEffect } from 'react';\nimport { getAll, create, update, remove } from './services/people';\nimport Header from './components/Header';\nimport Notification from './components/Notification';\nimport Filter from './components/Filter';\nimport PersonForm from './components/PersonForm';\nimport People from './components/People';\n\nconst App = () => {\n  const [people, setPeople] = useState([]);\n\n  const emptyPerson = { name: '', number: '' };\n  const [newPerson, setNewPerson] = useState(emptyPerson);\n\n  const [filterValue, setFilterValue] = useState('');\n  const [filtered, setFiltered] = useState(people);\n\n  const [message, setMessage] = useState(null);\n\n  useEffect(() => {\n    getAll()\n      .then(initialPersons => setPeople(initialPersons))\n      .catch(e =>\n        setMessage({\n          success: false,\n          fatalError: true,\n          text: `${e} - Please try again later.`,\n        })\n      );\n  }, []);\n\n  const clearMessage = () => setMessage(null);\n\n  const addPerson = e => {\n    e.preventDefault();\n\n    const isDuplicate = people.some(p => p.name === newPerson.name);\n\n    if (isDuplicate) {\n      const isConfirmed = window.confirm(\n        `${newPerson.name} is already added. Replace the old number?`\n      );\n\n      if (isConfirmed) {\n        const { id } = people.find(p => p.name === newPerson.name);\n        update(id, newPerson)\n          .then(returnedPerson => {\n            setPeople(\n              people.map(p => (p.id === returnedPerson.id ? returnedPerson : p))\n            );\n            setMessage({\n              success: true,\n              text: `Updated number for ${returnedPerson.name}`,\n            });\n            setTimeout(clearMessage, 5000);\n          })\n          .catch(e => {\n            let errorText;\n            if (e.response.data) {\n              errorText = e.response.data.error;\n            } else {\n              setPeople(people.filter(p => p.id !== id));\n              errorText = `${\n                newPerson.name\n              } was already deleted from the server!`;\n            }\n\n            setMessage({\n              success: false,\n              text: errorText,\n            });\n            setTimeout(clearMessage, 5000);\n          });\n      }\n    } else {\n      create(newPerson)\n        .then(returnedPerson => {\n          setPeople([...people, returnedPerson]);\n          setMessage({\n            success: true,\n            text: `Added ${newPerson.name}!`,\n          });\n        })\n        .catch(e =>\n          setMessage({\n            success: false,\n            text: `${e.response.data.error}`,\n          })\n        );\n\n      setTimeout(clearMessage, 5000);\n    }\n\n    setNewPerson(emptyPerson);\n  };\n\n  const deletePerson = id => {\n    const personToDelete = people.find(p => p.id === id);\n    const isConfirmed = window.confirm(`Delete ${personToDelete.name}?`);\n\n    if (isConfirmed) {\n      remove(id)\n        .then(() => setPeople(people.filter(p => p.id !== id)))\n        .catch(e => {\n          setPeople(people.filter(p => p.id !== id));\n          setMessage({\n            success: false,\n            text: `${personToDelete.name} was already deleted from the server`,\n          });\n          setTimeout(clearMessage, 5000);\n        });\n      setFilterValue('');\n    }\n  };\n\n  const handleChange = e => {\n    const { name, value } = e.target;\n    setNewPerson({\n      ...newPerson,\n      [name]: value,\n    });\n  };\n\n  const handleFilter = e => {\n    const { value } = e.target;\n    setFilterValue(value);\n  };\n\n  useEffect(() => {\n    const filterResult = people.filter(p =>\n      p.name.toLowerCase().includes(filterValue.toLowerCase())\n    );\n    filterResult.length && setFiltered(filterResult);\n  }, [people, filterValue]);\n\n  return (\n    <div>\n      <Header title=\"Phonebook\" />\n      {message && <Notification message={message} />}\n      {message && message.fatalError ? null : (\n        <>\n          <Filter onChange={handleFilter} value={filterValue} />\n          <PersonForm\n            onSubmit={addPerson}\n            onChange={handleChange}\n            newPerson={newPerson}\n          />\n          <People people={filtered} handleDelete={deletePerson} />\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}